apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: homer
  namespace: argocd
spec:
  project: default
  source:
    repoURL: https://charts.gabe565.com
    chart: homer
    targetRevision: 0.2.x
    helm:
      values: |
        ingress:
          main:
            enabled: true
            ingressClassName: nginx
            annotations:
              external-dns.alpha.kubernetes.io/hostname: "homer.unbund.com"
              external-dns.alpha.kubernetes.io/target: "22051e43-bc84-438d-b7c3-b829c1e2f6ad.cfargotunnel.com"
              external-dns.alpha.kubernetes.io/cloudflare-proxied: "true"
            hosts:
              - host: homer.unbund.com
                paths:
                  - path: /
                    pathType: Prefix
        config:
          title: "Unbund Homelab"
          subtitle: "AI & Automation Dashboard"
          logo: "https://upload.wikimedia.org/wikipedia/commons/3/39/Kubernetes_logo_%28not_shadowed%29.svg"
          header: true
          footer: '<p>Built with ❤️ and ArgoCD</p>'
          columns: "3"
          connectivityTest: false
          defaults:
            layout: columns
            color: theme
          theme: default
          services:
            - name: "AI Stack"
              icon: "fas fa-brain"
              items:
                - name: "Chat (Open WebUI)"
                  logo: "https://raw.githubusercontent.com/open-webui/open-webui/main/public/favicon.png"
                  subtitle: "LLM Interface"
                  tag: "AI"
                  url: "https://chat.unbund.com"
                - name: "Langflow"
                  logo: "https://www.langflow.org/favicon.ico"
                  subtitle: "Agent Creation"
                  tag: "AI"
                  url: "https://agents.unbund.com"
                - name: "LLM Benchmark"
                  subtitle: "Stress Testing"
                  tag: "Bench"
                  url: "https://benchmark.unbund.com"
            - name: "Automation"
              icon: "fas fa-robot"
              items:
                - name: "n8n"
                  logo: "https://n8n.io/favicon.ico"
                  subtitle: "Workflow Automation"
                  tag: "Low-Code"
                  url: "https://n8n.unbund.com"
            - name: "Infrastructure"
              icon: "fas fa-server"
              items:
                - name: "Grafana"
                  logo: "https://grafana.com/static/img/favicons/favicon-32x32.png"
                  subtitle: "Monitoring"
                  tag: "Ops"
                  url: "https://grafana.unbund.com"
                - name: "ArgoCD"
                  logo: "https://argoproj.github.io/argo-cd/assets/favicon.png"
                  subtitle: "GitOps"
                  tag: "CD"
                  url: "https://argocd.unbund.com"
            - name: "Fun"
              icon: "fas fa-gamepad"
              items:
                - name: "OpenClaw"
                  subtitle: "Classic Game"
                  tag: "Game"
                  url: "https://claw.unbund.com"
  destination:
    server: https://kubernetes.default.svc
    namespace: homer
  syncPolicy:
    automated: { prune: true, selfHeal: true }
    syncOptions: [CreateNamespace=true]
