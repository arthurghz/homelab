apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: homer
  namespace: argocd
spec:
  project: default
  source:
    repoURL: https://charts.gabe565.com
    chart: homer
    targetRevision: 0.2.x
    helm:
      values: |
        ingress:
          main:
            enabled: true
            ingressClassName: nginx
            annotations:
              external-dns.alpha.kubernetes.io/hostname: "homer.unbund.com"
              external-dns.alpha.kubernetes.io/target: "22051e43-bc84-438d-b7c3-b829c1e2f6ad.cfargotunnel.com"
              external-dns.alpha.kubernetes.io/cloudflare-proxied: "true"
            hosts:
              - host: homer.unbund.com
                paths:
                  - path: /
                    pathType: Prefix
        configMaps:
          config:
            enabled: true
            data:
              config.yml: |
                title: "Unbund Homelab"
                subtitle: "AI, Ops & Automation"
                logo: "https://upload.wikimedia.org/wikipedia/commons/3/39/Kubernetes_logo_%28not_shadowed%29.svg"
                header: true
                footer: '<p>Managed by Gemini CLI | 2026</p>'
                columns: "3"
                connectivityTest: false
                theme: "paper-dark"
                services:
                  - name: "AI Stack"
                    icon: "fas fa-brain"
                    items:
                      - name: "Chat"
                        logo: "https://raw.githubusercontent.com/open-webui/open-webui/main/public/favicon.png"
                        subtitle: "Open WebUI"
                        tag: "AI"
                        url: "https://chat.unbund.com"
                      - name: "Agents"
                        logo: "https://www.langflow.org/favicon.ico"
                        subtitle: "Langflow Designer"
                        tag: "AI"
                        url: "https://agents.unbund.com"
                      - name: "Ollama"
                        icon: "fas fa-microchip"
                        subtitle: "LLM Backend"
                        tag: "API"
                        url: "https://ollama.unbund.com"
                      - name: "Benchmark"
                        icon: "fas fa-tachometer-alt"
                        subtitle: "LLM Performance"
                        tag: "Bench"
                        url: "https://benchmark.unbund.com"
                  - name: "Automation"
                    icon: "fas fa-robot"
                    items:
                      - name: "n8n"
                        logo: "https://n8n.io/favicon.ico"
                        subtitle: "Workflow Engine"
                        tag: "Low-Code"
                        url: "https://n8n.unbund.com"
                  - name: "Infrastructure"
                    icon: "fas fa-tools"
                    items:
                      - name: "ArgoCD"
                        logo: "https://argoproj.github.io/argo-cd/assets/favicon.png"
                        subtitle: "GitOps CD"
                        tag: "CD"
                        url: "https://argocd.unbund.com"
                      - name: "Grafana"
                        logo: "https://grafana.com/static/img/favicons/favicon-32x32.png"
                        subtitle: "Monitoring"
                        tag: "Ops"
                        url: "https://grafana.unbund.com"
                      - name: "Ingress Nginx"
                        icon: "fas fa-network-wired"
                        subtitle: "Traffic Controller"
                        tag: "Network"
                        url: "#"
                  - name: "Entertainment"
                    icon: "fas fa-gamepad"
                    items:
                      - name: "OpenClaw"
                        icon: "fas fa-cat"
                        subtitle: "Classic Game"
                        tag: "Game"
                        url: "https://claw.unbund.com"
        persistence:
          config:
            enabled: true
            type: configMap
            name: homer-config
            advancedMounts:
              main:
                main:
                  - path: /www/assets/config.yml
                    subPath: config.yml
  destination:
    server: https://kubernetes.default.svc
    namespace: homer
  syncPolicy:
    automated: { prune: true, selfHeal: true }
    syncOptions: [CreateNamespace=true]
